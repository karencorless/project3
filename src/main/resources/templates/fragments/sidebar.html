<div th:fragment="sidebar" xmlns:th="http://www.w3.org/1999/xhtml">
    <!-- Toggle button starts collapsed -->
    <button class="sidebar-toggle collapsed" onclick="toggleSidebar()">≡</button>

    <!-- Sidebar starts collapsed -->
    <div class="sidebar collapsed" id="sidebar">
        <div class="sidebar-title">Menu</div>

        <div class="sidebar-section">
            <div class="sidebar-section-title">Statistics</div>
            <div class="stat-item">
                <div class="stat-label">Games Played:</div>
                <div class="stat-value" id="games-played" th:text="${currentUser.gamesPlayed}">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Games Won:</div>
                <div class="stat-value" id="games-won" th:text="${currentUser.gamesWon}">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Win Ratio:</div>
                <div class="stat-value" id="win-ratio"
                     th:text="${currentUser.gamesPlayed != 0 ?
                     T(java.lang.Math).round((currentUser.gamesWon * 100.0 / currentUser.gamesPlayed)) + '%' : '0%'}">
                    0%
                </div>
            </div>
        </div>

        <div class="sidebar-section">
            <div class="sidebar-section-title">Battle Prep</div>
            <a href="/decks" th:href="@{/decks}" class="sidebar-link">View Decks</a>
            <a href="/decks/compare" th:href="@{/decks/compare}" class="sidebar-link">Compare Cards</a>
        </div>
    </div>

    <script>
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const toggleBtn = document.querySelector('.sidebar-toggle');

            sidebar.classList.toggle('collapsed');
            toggleBtn.classList.toggle('collapsed');

            toggleBtn.textContent = sidebar.classList.contains('collapsed') ? "≡" : "×";
        }
    </script>
</div>
