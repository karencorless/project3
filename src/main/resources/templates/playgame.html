<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Play Game</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>

<!-- You may keep success/user feedback separate -->
<div th:if="${successMessage}" class="message success">
    <p th:text="${successMessage}"></p>
</div>

<!-- Show results after battle -->
<div th:if="${cpuPlayedCard != null}">
    <p>You selected: <strong th:text="${chosenStat}"></strong></p>
    <p>CPU played: <strong th:text="${cpuPlayedCard.name}"></strong></p>
    <p>CPU chosen stat: <strong th:text="${cpuChosenStat}"></strong></p>
    <p>CPU stat value: <strong th:text="${cpuStatValue}"></strong></p>
    <p>Your stat value: <strong th:text="${statValue}"></strong></p>
</div>

<!--Displays player's hand, prompts player to pick card-->
<h2>Your Hand:</h2>

<div class="hand-container" th:if="${playerHand != null and #lists.size(playerHand) > 0}">
    <div class="card-item" th:each="card: ${playerHand}">
        <p class="card-name" th:text="${card.name}"></p>
        <form th:action="@{/game/play/{gameId}(gameId=${gameId})}" method="post">
            <input type="hidden" name="currentPlayerId" th:value="${currentPlayerId}" />
            <input type="hidden" name="cardId" th:value="${card.id}" />
            <button type="submit" class="play-button">Play</button>
        </form>
    </div>
</div>
<p th:if="${playerHand == null or #lists.size(playerHand) == 0}">No cards to display.</p>


<!-- Prompts user to select a stat after picking a card -->
<div class="stat-container" th:if="${playedCard != null}">
    <form th:action="@{'/game/play/' + ${gameId} + '/select-stat'}" method="post">
        <input type="hidden" name="currentPlayerId" th:value="${currentPlayerId}" />
        <input type="hidden" name="cardId" th:value="${playedCard.id}" />

    <label for="stat-select">Please select a stat:</label>
    <select id="stat-select" name="chosenStat">
    <option value="strength">Strength</option>
    <option value="wisdom">Wisdom</option>
    <option value="defence">Defence</option>
    <option value="luck">Luck</option>
    <option value="unique-stat">Unique Stat</option>
</select>
        <button type="submit" class="button">Battle!</button></form>
</div>

<!--New game/reset hand button-->
<a th:href="@{/game/reset/{gameId}(gameId=${gameId})}" type="submit" class="button">New Game</a>
</body>
</html>